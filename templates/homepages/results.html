{% extends 'homepages/base.html' %}
{% load static %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load("current", { packages: ["corechart"] });
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Paticularities', 'Document\'s detail'],
      ['Common words', 83],
      ['Difficult words', 23],
      ['Incorrect Words', 46],
    ]);
    var options = {
      title: 'Particularities in the document',
      pieSliceText: 'label',
      slices: {
        1: { offset: 0.2 },
      },
    };

    var chart = new google.visualization.PieChart(
      document.getElementById('piechart')
    );
    chart.draw(data, options);
  }
</script>
<script type="text/javascript">
  google.charts.load("current", { packages: ["corechart"] });
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Document status', 'Plagiarized status'],
      ['Plagiarised', {{ match_percentage }},],
      ['Non-Plagiarised', {{ rest_percentage }}]
    ]);

    var options = {
      title: 'Document details',
      is3D: true,
    };

    var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
    chart.draw(data, options);
  }
</script>
<script type="text/javascript">
  google.charts.load("current", { packages: ['corechart'] });
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable(
      [
        ["Element", "Density", { role: "style" }],
        ["Jaccard Coeffient", {{ jaccard_coeficent }}, "green"],
        ["Containmanent Measure", {{ containment_measure }}, "blue"],
        ["Plagiarism Score", {{ score }}, "gold"]
      ]
    );

    var view = new google.visualization.DataView(data);
    view.setColumns([0, 1,
      {
        calc: "stringify",
        sourceColumn: 1,
        type: "string",
        role: "annotation"
      },
      2]);

    var options = {
      title: "Analysis of the document.",
      width: 600,
      height: 400,
      bar: { groupWidth: "95%" },
      legend: { position: "none" },
    };
    var chart = new google.visualization.ColumnChart(
      document.getElementById("columnchart_values")
    );
    chart.draw(view, options);
  }
</script>
{% block content %}
{% if score != null %}
<div class="w-100" style="height: 100px; display:block"></div>
<div class="d-flex justify-content-center">
  <div class="col-4" id="piechart_3d" style="width: 500px; height: 400px;"></div>
  <div class="col-4" id="piechart" style="width: 500px; height: 400px;"></div>
  <div class="col-4" id="columnchart_values" style="width: 500px; height: 300px;"></div>
</div>
{% else %}
<div class="w-100" style="height: 200px; display:block"></div>
<p class="fa-5x h-2 text-bold text-center">
  No document uploaded at this time!
</p>
<div class="d-flex justify-content-center">
  <a class="btn btn-white p-4 w-25 btn-outline-secondary" href="{% url 'upload' %}">
    Go and Upload!
  </a>
</div>

{% endif %}
{% endblock %}