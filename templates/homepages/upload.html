{% extends 'homepages/base.html' %}
{% load static %}
{% block content %}

    <main class="page pricing-table-page">
        <section class="clean-block clean-pricing dark" style="margin-top: 200px">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-5 col-lg-4">
                        <div class="dashed_upload">
                            <div class="wrapper my-5">
                                <div class="drop" style="top: 114px">
                                    <div class="cont">
                                        <i class="fa fa-cloud-upload"></i>
                                        <div class="tit">
                                            Drag & Drop
                                        </div>
                                        <div class="desc">
                                            or
                                        </div>
                                        <div class="browse">
                                            click here to browse
                                        </div>
                                    </div>
                                    <output id="list"></output>
                                    <input id="files" class="my-5" multiple name="files[]" type="file"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <form method="POST" action="{% url 'upload' %}">
        {% csrf_token %}
        <input type="file" accept="text/*" onchange="loadFile(event)">
        <img id="output"/>
        <input type="url" name="query" id="query" hidden>
        <button type="submit">Submit</button>
    </form>
    <script>
        const loadFile = function (event) {
            const output = document.getElementById('output');
            output.src = URL.createObjectURL(event.target.files[0]);
            output.onload = function () {
                URL.revokeObjectURL(output.src) // free memory
            }
            document.getElementById('query').value = output.src;
        };
    </script>



    {{ output }}
{% endblock %}